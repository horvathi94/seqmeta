class SampleField extends HTMLElement{constructor({field:e,sampleIndex:t=0,sampleName:i="",isEditAll:s=!1}){super(),this.field=e,this.sampleIndex=t,this.isEditAll=s,this.name=this.generateName(),this.input=null,this.sampleName=i,0==this.children.length?(this.createInput(),this.appendChild(this.input)):this.input=this.children[0]}generateName(){if(this.isEditAll&&"file"==this.field.type_)return"uploadedfiles+0+"+this.field.general_name;let e="sample";return`${e=this.isEditAll?"editall":e}+${this.sampleIndex}+`+this.field.general_name}createTextInput(){const e=document.createElement("input");return e.type="text",this.field.pattern&&(e.pattern=this.field.pattern),e}createSelectInput(){const t=document.createElement("select");let i;return this.field.options.forEach(e=>{(i=document.createElement("option")).innerHTML=e,i.value=e,t.add(i)}),t}createTemplateInput(){const e=document.createElement("input");return e.type="text",e.placeholder=this.field.template,this.isEditAll&&(e.disabled=!0),e}createDateInput(){const e=document.createElement("input");return e.type="date",e}createUniqueField(){const e=document.createElement("p");return e.textContent="Must be unique",e}createFileInput(){const e=document.createElement("input");return e.type="file",e.accept=this.field.options.map(e=>"."+e).join(","),(this.isEditAll||this.field.multiple_files)&&(e.multiple=!0),e}addOnChangeFunction(){if(this.isEditAll)return this.isTemplate()||(this.input.onchange=()=>{SAMPLE_EDITOR.onchangeEditAll(this)}),void("file"==this.field.type_&&(this.input.onchange=()=>{SAMPLE_EDITOR.samplesFromFiles(this)}));this.field.is_unique?this.input.onchange=()=>{SAMPLE_EDITOR.checkUnique(this),SAMPLE_EDITOR.updateSampleTemplates(this.closest("td").dataset.sampleIndex)}:this.input.onchange=()=>{SAMPLE_EDITOR.updateSampleTemplates(this.closest("td").dataset.sampleIndex)}}createInput(){if(this.isEditAll&&this.field.is_unique)this.input=this.createUniqueField();else{switch(this.field.type_){case"text":this.input=this.createTextInput();break;case"select":this.input=this.createSelectInput();break;case"template":this.input=this.createTemplateInput();break;case"date":this.input=this.createDateInput();break;case"file":this.input=this.createFileInput();break;default:return}this.input.name=this.name,this.dataset.generalName=this.field.general_name,this.field.default&&(this.input.value=this.field.default),this.addOnChangeFunction()}}get template(){if(this.isTemplate())return this.field.template}isTemplate(){return"template"==this.field.type_}get generalName(){return this.field.general_name}get value(){return this.input.value}set value(e){this.input.value=e}isInvalid(){this.classList.add("invalid")}isValid(){this.classList.remove("invalid")}}customElements.define("sample-field",SampleField);