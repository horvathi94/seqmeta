function newAttributeRow(){const e=document.querySelector("#template-editor-tab").tBodies[0],t=e.querySelector(".template-row").cloneNode(!0),l=(t.classList.remove("template-row"),e.rows.length-1);return Array.from(t.querySelectorAll(".attr.field")).forEach(e=>{e.name=e.name.replace("+0+",`+${l}+`)}),e.appendChild(t),t}function createOptionsField(e){const t=document.createElement("textarea");return t.classList.add("attr","field"),t.name=`attr+${e}+options`,t.onchange="updateDefaultCell(field.parentElement.parentElement);",t}function createRegexField(e){const t=document.createElement("input");return t.setAttribute("type","text"),t.classList.add("attr","field"),t.name=`attr+${e}+pattern`,t}function createTemplateField(e){const t=document.createElement("input");return t.setAttribute("type","text"),t.classList.add("attr","field"),t.name=`attr+${e}+template`,t}function changedType(e,t){const l=e.querySelector(".extra.column"),a=l.querySelector(".attr.field"),n=e.querySelector(".type.column>.attr.field.fieldtype");n.value=t;e=a.name.split("+")[1];let r,c;"text"==t?(c="Regex:",r=createRegexField(e),console.log(r)):"select"==t?(c="Options:",r=createOptionsField(e)):"template"==t?(c="Template:",r=createTemplateField(e)):"date"==t&&(c="N/A",(r=createRegexField(e)).disabled=!0),l.querySelector("label").innerHTML=c,l.querySelector("label").setAttribute("for",r.name),l.replaceChild(r,a)}function updateDefaultCell(l){type=l.querySelector(".type.column>select").value,defaultCell=l.querySelector(".default.column");let a;if("text"==type)(a=document.createElement("input")).setAttribute("type","text");else if("date"==type)(a=document.createElement("input")).setAttribute("type","date");else if("select"==type){a=document.createElement("select");let e=l.querySelector(".options.column>input").value.split(","),t;e.forEach(e=>{(t=document.createElement("option")).innerHTML=e,t.value=e,a.add(t)})}else"template"==type&&((a=document.createElement("input")).setAttribute("type","text"),a.disabled=!0);a.name=defaultCell.children[0].name,defaultCell.replaceChild(a,defaultCell.children[0])}function removeTemplateRow(e){e.remove()}function changedRequirement(e){const t=e.parentElement.parentElement.querySelector(".rmrow.column>input"),l=e.parentElement.querySelector(".repo.fieldname");"mandatory"==e.value||"recommended"==e.value?t.disabled=!0:"optional"==e.value?t.disabled=!1:(t.disabled=!1,l.value="",l.disabled=!0)}