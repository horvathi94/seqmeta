function createSelectMenu(e){const t=document.createElement("select");return e.forEach(e=>{(option=document.createElement("option")).innerHTML=e,option.value=e,t.add(option)}),t}function appendNewCell(e,t){const a=document.createElement("div");return a.classList.add("cell",t),e.appendChild(a),a}function createNewField(e,t,a,l=[]){let n;switch(t){case"select":n=createSelectMenu(l);break;case"textarea":n=document.createElement("textarea");break;default:(n=document.createElement("input")).setAttribute("type",t)}return n.classList.add("field","attr",a),n.name=`attr+${e}+`+a,n}function createParameterField(e,t){let a;switch(t){case"text":a=createPatternField(e);break;case"select":a=createOptionsField(e);break;case"template":(a=createNewField(e,"text","template")).placeholder="Template for creating the variable.";break;default:(a=createNewField(e,"text","junk")).placeholder="N/A",a.disabled=!0}return a.classList.add("param"),a}function createDefaultField(e,t,a=[],l=""){let n;return"text"==t&&(n=createNewField(e,"text","default"),""!=l&&(n.pattern=l)),"date"==t&&(n=createNewField(e,"date","default")),"select"==t&&(n=createNewField(e,"select","default",a)),"template"==t&&((n=createNewField(e,"text","default")).placeholder="N/A",n.value="",n.disabled=!0),n}function createRemoveButton(){const e=document.createElement("input");return e.setAttribute("type","button"),e.classList.add("rmbutton"),e.value="X",e.onclick=function(){this.parentElement.parentElement.remove()},e}const REQUIREMENTS=["exclude","optional","recommended","mandatory"],FIELDTYPES=["text","select","date","template"];function createPatternField(e){const t=createNewField(e,"text","pattern");return t.addEventListener("change",function(){updateDefaultField(this.parentElement.parentElement)},!1),t.placeholder="Regex for pattern matching.",t}function createOptionsField(e){const t=createNewField(e,"textarea","options");return t.addEventListener("change",function(){updateDefaultField(this.parentElement.parentElement)},!1),t.placeholder="Comma separated list of opions",t}function createTypeField(e){const t=createNewField(e,"select","type_",options=FIELDTYPES);return t.addEventListener("change",function(){changedAttributeType(this.parentElement.parentElement)},!1),t}function createRequirementField(e,t){const a=createNewField(e,"select",t+"_requirement",options=REQUIREMENTS);return a.addEventListener("change",function(){changedRequirement(this)},!1),a}function updateDefaultField(e,t=null){null===t&&(t=e.querySelector(".cell.type>.attr.field.type_").value);const a=e.querySelector(".cell.default"),l=a.querySelector(".field.attr.default");var n=l.name.split("+")[1];let r=[],c="";"text"==t&&(c=e.querySelector(".parameters.cell>.pattern").value);n=createDefaultField(n,t,r=r="select"==t?e.querySelector(".parameters.cell>.options").value.split(","):r,c=c);a.replaceChild(n,l)}function changedAttributeType(e){const t=e.querySelector(".cell.parameters"),a=t.querySelector(".field.attr.param");var l=e.querySelector(".cell.type>.attr.field.type_").value,n=a.name.split("+")[1];t.replaceChild(createParameterField(n,l),a),updateDefaultField(e,l)}function changedRequirement(e){const t=e.parentElement.parentElement.querySelector(".cell.rm>.rmbutton");"mandatory"==e.value||"recommended"==e.value?t.disabled=!0:t.disabled=!1}function createNewRow(e){const t=document.createElement("div");t.classList.add("attr","row");let a=appendNewCell(t,"rm");return a.appendChild(createRemoveButton()),(a=appendNewCell(t,"name")).appendChild(createNewField(e,"text","general_name")),(a=appendNewCell(t,"label")).appendChild(createNewField(e,"text","label")),(a=appendNewCell(t,"type")).appendChild(createTypeField(e)),(a=appendNewCell(t,"ena")).appendChild(createNewField(e,"text","ena_name")),a.appendChild(createRequirementField(e,"ena")),(a=appendNewCell(t,"parameters")).appendChild(createParameterField(e,"text")),(a=appendNewCell(t,"default")).appendChild(createDefaultField(e,"text")),(a=appendNewCell(t,"description")).appendChild(createNewField(e,"textarea","description")),t}function appendNewRow(){const e=document.querySelector("#template-editor");var t=createNewRow(e.children.length+1);return e.appendChild(t),t}R;