FIELD_TYPES=["text","select","date","template"],REQUIREMENT_LEVELS=["exclude","optional","recommended","mandatory"];class AttrField extends HTMLElement{constructor({name:e,type:t="text",index:n=0,label:i=null,options:l=[]}){super(),this.index=n,this.type=t,this.label=i,this.options=l,this.name=`attr+${this.index}+`+e,0==this.children.length&&this.appendInput()}createTextInput(){const e=document.createElement("input");return e.type="text",e}createCheckboxInput(){const e=document.createElement("input");return e.type="checkbox",e}createSelectInput(){const t=document.createElement("select");let n;return this.options.forEach(e=>{(n=document.createElement("option")).innerHTML=e,n.value=e,t.add(n)}),t}createInput(){let e;switch(this.type){case"text":e=this.createTextInput();break;case"checkbox":e=this.createCheckboxInput();break;case"select":e=this.createSelectInput();break;default:return}return e.name=this.name,e}appendInput(){this.appendChild(this.createInput())}}customElements.define("attr-field",AttrField);class RowHandler{constructor(e,t=0){this.row=e,this._index=t,this.countCells()||this.initCells()}get index(){return this._index}set index(e){this._index=e}initCells(){this.appendCell("rm"),this.fillCell("rm",[this.createRemoveButton()]),this.appendCell("general_name");var e=new AttrField({name:"general_name",type:"text",index:this.index}),e=(this.fillCell("general_name",[e]),this.appendCell("is_unique"),new AttrField({name:"is_unique",type:"checkbox",index:this.index}));this.fillCell("is_unique",[e]),this.appendCell("label"),this.appendCell("type"),this.appendCell("gisaid"),this.appendCell("ena"),this.appendCell("paramters"),this.appendCell("default"),this.appendCell("description")}countCells(){return parseInt(this.row.querySelectorAll("td").length)}addClass(e){this.row.classList.add(e)}appendCell(e){const t=this.row.insertCell();return t.dataset.cellName=e,t}getCell(e){return this.row.querySelector(`td[data-cell-name=${e}]`)}clearCell(e){const t=this.getCell(e);t.innerHTML=""}fillCell(e,t=[]){const n=this.getCell(e);t.forEach(e=>{n.appendChild(e)})}createRemoveButton(){const e=document.createElement("input");return e.type="button",e.value="❌",e.onclick=()=>{this.row.remove()},e}createUniqueField(){this.appendCell("is_unique",[input])}insertLabelCell(){var e=new AttrField({name:"label",type:"text",index:this.index});this.appendCell("label",[e])}insertTypeCell(){var e=new AttrField({name:"type_",type:"select",index:this.index,options:FIELD_TYPES});this.appendCell("type",[e])}insertGisaidCell(){var e=new AttrField({name:"gisaid_name",type:"text",index:this.index}),t=new AttrField({name:"gisaid_requirement",type:"select",index:this.index,options:REQUIREMENT_LEVELS}),n=new AttrField({name:"gisaid_header",type:"text",index:this.index});this.appendCell("type",[e,t,n])}insertEnaCell(){var e=new AttrField({name:"ena_name",type:"text",index:this.index}),t=new AttrField({name:"ena_requirement",type:"select",index:this.index,options:REQUIREMENT_LEVELS}),n=new AttrField({name:"ena_units",type:"text",index:this.index});this.appendCell("type",[e,t,n])}insertParametersCell(){}insertDefaultCell(){}insertDescriptionCell(){}}class AttributeEditor{constructor(){this.editor=document.querySelector("#attribute-editor")}countRows(){return parseInt(this.editor.querySelectorAll("tr").length)}appendRow(){var e=this.editor.insertRow();const t=new RowHandler(e,this.countRows());t.addClass("row")}}const ATTRIBUTE_EDITOR=new AttributeEditor;$(document).ready(function(){$("#attribute-editor tbody").sortable()}),ATTRIBUTE_EDITOR.appendRow(),ATTRIBUTE_EDITOR.appendRow(),ATTRIBUTE_EDITOR.appendRow(),ATTRIBUTE_EDITOR.appendRow(),ATTRIBUTE_EDITOR.appendRow();