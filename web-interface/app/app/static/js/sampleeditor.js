function newSample(){var l=(editor=document.querySelector("#samples-editor")).rows[0].cells.length-1,t=editor.rows[0].cells.length-3;let o,r,a;for(let e=0;e<editor.rows.length;e++)o=editor.rows[e].querySelector(".template.column"),a=editor.rows[e].insertCell(l),0==e?a.outerHTML=`<th name="sample${t}">Sample ${t} <input type="button" onclick="removeSample(${t});" value="X"></th>`:((r=o.children[0].cloneNode(!0)).name=r.name.replace("+0+",`+${t}+`),a.appendChild(r)),a.classList.add("sample","column")}function removeSample(e){editor=document.querySelector("#samples-editor");let l,t;for(l=0;l<editor.rows[0].cells.length;l++)if((t=editor.rows[0].cells[l]).hasAttribute("name")&&!t.name!="sample"+e){colIndex=l;break}for(let e=0;e<editor.rows.length;e++)editor.rows[e].deleteCell(l)}function editAll(l){var e=l.name.split("+")[2];console.log(e);const t=document.querySelector("tr.attr."+e);console.log(t),Array.from(t.querySelectorAll("td.sample.column")).forEach(e=>{e.children[0].value=l.value}),updateTemplateFields()}function updateTemplateFields(){let t=[],o=!0,r="",a;Array.from(document.querySelectorAll(".template.field")).forEach(l=>{o=!0,t=[],r="",[...l.getAttribute("template-string")].forEach(e=>{o="["==e?(t.push({type:"var",value:""}),!1):"]"==e||(o&&t.push({type:"const",value:""}),t[t.length-1].value+=e,!1)}),t.forEach(e=>{"const"==e.type?r+=e.value:(a=l.name.substr(0,l.name.lastIndexOf("+"))+("+"+e.value),""!==(val=document.querySelector(`[name='${a}']`).value)?r+=val:r+="["+e.value+"]"),l.value=r})})}