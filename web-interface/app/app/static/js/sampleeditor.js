async function fetchTemplate(){const e=await fetch("/templates/json/"+TEMPLATE_ID);return e.json()}function createAttributeField(e,t=!1){let a;switch(a=document.createElement("input"),e.type_){case"text":(a=document.createElement("input")).type="text",e.pattern&&(a.pattern=e.pattern),e.default&&(a.value=e.default);break;case"select":a=createSelectMenu(parseOptions(e.options)),e.default&&(a.value=e.default);break;case"date":(a=document.createElement("input")).type="date",e.default&&(a.value=e.default);break;case"template":(a=document.createElement("input")).type="text",a.placeholder=e.template}return t&&a.addEventListener("change",function(){changeAll(this)},!1),a}function changeAll(t){t.parentElement.parentElement.querySelectorAll(".sample.attr").forEach(e=>{e.querySelector(".attr.field").value=t.value})}function createNewRow(e){const t=document.createElement("tr"),a=(t.classList.add("row",e.general_name),document.createElement("th")),n=(a.innerHTML=e.label,t.appendChild(a),document.createElement("td")),l=(n.appendChild(createAttributeField(e,isEditAll=!0)),t.appendChild(n),document.createElement("td"));return l.innerHTML=e.description,t.appendChild(l),t}async function addNewSample(){const e=await fetchTemplate(),t=document.querySelector("#sample-editor").tBodies[0];let a,n,l;e.attributes.forEach(e=>{a=t.querySelector(".row."+e.general_name),(l=createAttributeField(e)).classList.add("field","attr",e.general_name),(n=a.insertCell(a.cells.length-1)).classList.add("attr","sample",e.general_name),n.appendChild(l)})}async function initSampleEditor(){const e=await fetchTemplate(),t=document.querySelector("#sample-editor").tBodies[0];let a;e.attributes.forEach(e=>{a=createNewRow(e),t.appendChild(a)})}initSampleEditor();