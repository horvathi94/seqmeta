const SAMPLE_EDITOR=document.querySelector("#sample-editor").tBodies[0],SAMPLE_NAME_ATTR={general_name:"name",label:"Sample name",description:"Unique name to differentiate between registered samples.",pattern:"\\w+",type_:"sample_name"},SHORT_DESCRIPTION_ATTR={general_name:"short_description",label:"Short description",description:"A short description to more easily identify the sample.",type_:"text"};async function fetchTemplate(){var e=document.querySelector("#template-id").value;const t=await fetch("/templates/json/"+e);return t.json()}function createAttributeField(e,t="",a=!1){let n;var l=t+"+"+e.general_name;switch(e.type_){case"text":(n=new TextField(l)).setPattern(e.pattern);break;case"select":n=new SelectField(l,e.options);break;case"date":n=new DateField(l);break;case"template":(n=new TextField(l)).input.placeholder=e.template,n.input.setAttribute("template-string",e.template),n.addClasses(["template"]);break;case"sample_name":a||((n=new TextField(l)).pattern=e.pattern)}return n.setValue(e.default),n.addClasses([e.general_name]),n}function createEditAllField(e){let t;return"sample_name"==e.type_?((t=document.createElement("p")).innerHTML="Must be unique.",t):(t=createAttributeField(e)).input}function createTextCell(e,t=[],a="td"){const n=document.createElement(a),l=(n.classList.add(t),document.createElement("p"));return l.innerHTML=e,n.appendChild(l),n}function createEditAllCell(e){const t=document.createElement("td");t.classList.add("editall");e=createEditAllField(e);return t.appendChild(e),t}function createAttributeRow(e){const t=document.createElement("tr");return t.classList.add(e.general_name),t.appendChild(createTextCell(e.label,classList=["title"],element="th")),t.appendChild(createEditAllCell(e)),t.appendChild(createTextCell(e.description,classList=["description"],element="td")),t}function initTable(){SAMPLE_EDITOR.appendChild(createAttributeRow(SAMPLE_NAME_ATTR)),SAMPLE_EDITOR.appendChild(createAttributeRow(SHORT_DESCRIPTION_ATTR));var e=document.querySelector("#template-id").value;fetch("/templates/json/"+e).then(e=>e.json()).then(e=>{e.attributes.forEach(e=>{SAMPLE_EDITOR.appendChild(createAttributeRow(e))})})}initTable();