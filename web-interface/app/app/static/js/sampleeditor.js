function newSample(){var l=(editor=document.querySelector("#samples-editor")).rows[0].cells.length-1,t=editor.rows[0].cells.length-3;let r,o,a;for(let e=0;e<editor.rows.length;e++)r=editor.rows[e].querySelector(".template.column"),a=editor.rows[e].insertCell(l),0==e?a.outerHTML=`<th name="sample${t}">Sample ${t} <input type="button" onclick="removeSample(${t});" value="X"></th>`:((o=r.children[0].cloneNode(!0)).name=o.name.replace("+0+",`+${t}+`),a.appendChild(o)),a.classList.add("sample","column")}function removeSample(e){editor=document.querySelector("#samples-editor");let l,t;for(l=0;l<editor.rows[0].cells.length;l++)if((t=editor.rows[0].cells[l]).hasAttribute("name")&&!t.name!="sample"+e){colIndex=l;break}for(let e=0;e<editor.rows.length;e++)editor.rows[e].deleteCell(l)}function editAll(l){var e=l.name.split("+")[2];const t=document.querySelector("tr.attr."+e);Array.from(t.querySelectorAll("td.sample.column")).forEach(e=>{e.children[0].value=l.value})}function updateTemplateFields(e){let t=[],r=!0,o="",a;Array.from(document.querySelectorAll(".template.field")).forEach(l=>{r=!0,t=[],o="",[...l.getAttribute("template-string")].forEach(e=>{r="["==e?(t.push({type:"var",value:""}),!1):"]"==e||(r&&t.push({type:"const",value:""}),t[t.length-1].value+=e,!1)}),t.forEach(e=>{"const"==e.type?o+=e.value:(a=l.name.substr(0,l.name.lastIndexOf("+"))+("+"+e.value),""!==(val=document.querySelector(`[name='${a}']`).value)?o+=val:o+="["+e.value+"]"),l.value=o})})}