function string2XML(e){return(new window.DOMParser).parseFromString(e,"text/xml")}function fecthEnaXml(){return string2XML(rawXML)}function appendEnaInfo(e,r){const t=document.querySelector("#ena-info"),l=document.createElement("p");l.innerHTML=`<strong>${e}:</strong>`+r,t.appendChild(l)}function updateType(e,r){e.querySelector(".cell.type>.attr.field.type_").value=r,changedAttributeType(e)}function cleanNameField(e){return clean=e.replace(/[ /]/g,"_").replace(/[()]/g,"")}function parseFieldGroup(e){let l,a,n,c,o,i;Array.from(e.querySelectorAll("FIELD")).forEach(r=>{switch(l=r.querySelector("NAME").innerHTML,a=r.querySelector("LABEL").innerHTML,n=r.querySelector("MANDATORY").innerHTML,c=r.querySelector("DESCRIPTION").innerHTML,dataType=r.querySelector("FIELD_TYPE").children[0],(o=appendNewRow()).querySelector(".cell.name>.attr.field.general_name").value=cleanNameField(l),o.querySelector(".cell.ena>.attr.field.ena_name").value=l,o.querySelector(".cell.label>.attr.field.label").value=a.charAt(0).toUpperCase()+a.slice(1),o.querySelector(".cell.description>.attr.field.description").value=c,(i=o.querySelector(".cell.ena>.attr.field.ena_requirement")).value=n,changedRequirement(i),dataType.tagName){case"TEXT_FIELD":updateType(o,"text");var t=dataType.querySelector("REGEX_VALUE");null!==t&&(o.querySelector(".cell.parameters>.attr.field.pattern").value=t.innerHTML),updateDefaultField(o,"text");break;case"TEXT_AREA_FIELD":updateType(o,"text");break;case"TEXT_CHOICE_FIELD":updateType(o,"select");let e=Array.from(dataType.querySelectorAll("TEXT_VALUE")).map(e=>e.querySelector("VALUE").innerHTML);o.querySelector(".cell.parameters>.attr.field.options").value=e.join(","),updateDefaultField(o,"select")}})}function parseXmlChecklist(){var e="ERC000033";const r=fecthEnaXml(),t=r.querySelector(`CHECKLIST_SET > CHECKLIST[checklistType='Sample'][accession='${e}']`);if(null!==t)if(t.querySelector("IDENTIFIERS>PRIMARY_ID").innerHTML==e){const l=t.querySelector("DESCRIPTOR");appendEnaInfo("Label",l.querySelector("LABEL").innerHTML),appendEnaInfo("Name",l.querySelector("NAME").innerHTML),appendEnaInfo("Description",l.querySelector("DESCRIPTION").innerHTML),appendEnaInfo("Authority",l.querySelector("AUTHORITY").innerHTML),Array.from(t.querySelectorAll("FIELD_GROUP")).forEach(e=>{parseFieldGroup(e)})}else alert("Mismatch in accession number!");else alert("Mismatch in accession number!")}parseXmlChecklist();