const VIEW_TABLE=document.querySelector("#samples-view").tBodies[0];function clearTable(){Array.from(VIEW_TABLE.rows).forEach(e=>{e.classList.contains("head")||e.remove()})}async function fetchSample(e,t){let n=await fetch(`/samples/json?name=${e}&template_name=`+t);return n=await n.json()}async function fetchTemplate(e){let t=await fetch("/templates/json?template_name="+e);return t=await t.json()}function mark(e){return e?"✓":"❌"}async function appendSample(e,t){e=await fetchSample(e,t);const n=VIEW_TABLE.insertRow();let a=n.insertCell();a.textContent=e.name,(a=n.insertCell()).textContent=e.short_description,(a=n.insertCell()).classList.add("gisaid"),a.textContent=mark(e.is_gisaid_complete),(a=n.insertCell()).classList.add("ena"),a.textContent=mark(e.is_ena_complete),a=n.insertCell();const s=document.createElement("input");s.type="checkbox",s.name=e.name,a.appendChild(s)}async function updateView(){const t=document.querySelector("#selected-template").value;clearTable(),await fetch("/samples/names?template_name="+t).then(e=>e.json()).then(e=>e.forEach(e=>{appendSample(e,t)})),await fetch("/templates/json?name="+t).then(e=>e.json()).then(e=>{e.gisaid_assembly||document.querySelectorAll("td.gisaid").forEach(e=>{e.textContent="N/A"}),e.ena_reads||document.querySelectorAll("td.ena").forEach(e=>{e.textContent="N/A"})})}updateView();