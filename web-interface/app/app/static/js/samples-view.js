const VIEW_TABLE=document.querySelector("#samples-view").tBodies[0];function clearTable(){Array.from(VIEW_TABLE.rows).forEach(e=>{e.classList.contains("head")||e.remove()})}async function fetchSample(e,t){let a=await fetch(`/samples/json?name=${e}&template_name=`+t);return a=await a.json()}async function fetchTemplate(e){let t=await fetch("/templates/json?template_name="+e);return t=await t.json()}function mark(e){return e?"✓":"❌"}async function appendSample(e,t){e=await fetchSample(e,t);const a=VIEW_TABLE.insertRow();let n=a.insertCell();n.textContent=e.name,(n=a.insertCell()).textContent=e.short_description,(n=a.insertCell()).classList.add("gisaid"),n.textContent=mark(e.is_gisaid_complete),(n=a.insertCell()).classList.add("ena"),n.textContent=mark(e.is_ena_complete),(n=a.insertCell()).classList.add("uploaded-gisaid"),n.textContent=mark(e.uploaded_to_gisaid),(n=a.insertCell()).classList.add("uploaded-ena"),n.textContent=mark(e.uploaded_to_ena),n=a.insertCell();const s=document.createElement("input");s.type="checkbox",s.name=e.name,n.appendChild(s)}async function updateView(){const t=document.querySelector("#selected-template").value;clearTable(),await fetch("/samples/names?template_name="+t).then(e=>e.json()).then(e=>e.forEach(e=>{appendSample(e,t)})),await fetch("/templates/json?name="+t).then(e=>e.json()).then(e=>{e.gisaid_assembly||document.querySelectorAll("td.gisaid").forEach(e=>{e.textContent="N/A"}),e.ena_reads||document.querySelectorAll("td.ena").forEach(e=>{e.textContent="N/A"})})}updateView();