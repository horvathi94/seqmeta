function parseTemplateString(a){let b=[],c=!0,d=!1;return[...a].forEach(a=>{"["==a?(b.push({type:"var",value:"",format:""}),c=!1):"]"==a?c=!0:(c&&b.push({type:"const",value:"",format:""}),d?(b[b.length-1].format=a,d=!1):"%"==a?d=!0:(b[b.length-1].value+=a,c=!1))}),b}DATE_FORMATS=["Y","m","d"],STRING_FORMATS=["U","l","C"];function constructStringFromTemplate(a){let b="";return a.forEach(a=>{if("const"==a.type)b+=a.value;else if(!a.fieldValue)b+="["+a.value,a.format&&(b+="%"+a.format),b+="]";else if(!a.format)b+=a.fieldValue;else if(DATE_FORMATS.includes(a.format)){let c=new Date(a.fieldValue);"Y"==a.format&&(b+=c.getFullYear()),"m"==a.format&&(b+=c.getMonth()+1),"d"==a.format&&(b+=c.getDate())}else STRING_FORMATS.includes(a.format)&&("U"==a.format&&(b+=a.fieldValue.toUpperCase()),"l"==a.format&&(b+=a.fieldValue.toLowerCase()),"C"==a.format&&(b+=a.fieldValue.slice(0,1).toUpperCase()+a.field.value.split(1).toLowerCase()))}),b}