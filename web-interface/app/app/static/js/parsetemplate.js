function parseTemplateString(e){let t=[],a=!0,l=!1;return[...e].forEach(e=>{"["==e?(t.push({type:"var",value:"",format:""}),a=!1):"]"==e?a=!0:(a&&t.push({type:"const",value:"",format:""}),l?(t[t.length-1].format=e,l=!1):"%"==e?l=!0:(t[t.length-1].value+=e,a=!1))}),t}function constructStringFromTemplate(e){let a="";return e.forEach(t=>{if("const"==t.type)a+=t.value;else if(t.fieldValue)if(t.format)if(DATE_FORMATS.includes(t.format)){let e=new Date(t.fieldValue);"Y"==t.format&&(a+=e.getFullYear()),"m"==t.format&&(a+=e.getMonth()),"d"==t.format&&(a+=e.getDate())}else STRING_FORMATS.includes(t.format)&&("U"==t.format&&(a+=t.fieldValue.toUpperCase()),"l"==t.format&&(a+=t.fieldValue.toLowerCase()),"C"==t.format&&(a+=t.fieldValue.slice(0,1).toUpperCase()+t.field.value.split(1).toLowerCase()));else a+=t.fieldValue;else a+="["+t.value,t.format&&(a+="%"+t.format),a+="]"}),a}DATE_FORMATS=["Y","m","d"],STRING_FORMATS=["U","l","C"];