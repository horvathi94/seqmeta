class AttrField extends HTMLElement{constructor({fname:e,type:t="text",index:n=0,label:i=null,options:a=[],onchange:s=null,placeholder:r=null,isHidden:h=!1,pattern:l=""}){super(),this._index=n,this.type=t,this.label=i,this.options=a,this.fieldName=e,this.placeholder=r,this.onchange=s,this.dataset.fieldName=this.fieldName,this.isHidden=h,this.input=null,this._invalid=!1,this.pattern=l,this.generateName(),0==this.children.length&&this.appendInput(),this.isHidden&&this.classList.add("invisible")}generateName(){this.name=`attr+${this.index}+`+this.fieldName}get index(){return this._index}set index(e){this._index=e,this.generateName(),this.input.name=this.name}createTextInput(){const e=document.createElement("input");return e.type="text",this.pattern&&(e.pattern=this.pattern),e}createTextAreaInput(){return document.createElement("textarea")}createJunkInput(){const e=document.createElement("input");return e.type="text",e.disabled=!0,e.value="N/A",e}createDateInput(){const e=document.createElement("input");return e.type="date",e}createBooleanInput(){const e=document.createElement("input");return e.type="number",e.min=0,e.max=1,e.step=1,e.value=0,e}createCheckboxInput(){const e=document.createElement("input");return e.type="checkbox",e}createSelectInput(){const t=document.createElement("select");let n;return this.options.forEach(e=>{(n=document.createElement("option")).innerHTML=e,n.value=e,t.add(n)}),t}createInput(){let e;switch(this.type){case"text":e=this.createTextInput();break;case"checkbox":e=this.createCheckboxInput();break;case"select":e=this.createSelectInput();break;case"date":e=this.createDateInput();break;case"hidden":e=this.createHiddenInput();break;case"textarea":e=this.createTextAreaInput();break;case"boolean":e=this.createBooleanInput();break;case"junk":e=this.createJunkInput();break;default:return}return e.name=this.name,null!==this.placeholder&&(e.placeholder=this.placeholder),null!==this.onchange&&(e.onchange=this.onchange),e}appendInput(){this.input=this.createInput(),this.appendChild(this.input)}get value(){return"boolean"==this.type?Boolean(parseInt(this.input.value)):this.input.value}set value(e){"boolean"!=this.type?this.input.value=e:this.input.value=+e}addClass(e){this.input.classList.add(e)}removeClass(e){this.input.classList.remove(e)}set invalid(e){this._invalid=e,this._invalid?this.addClass("invalid"):this.removeClass("invalid")}checked(e){"checkbox"==this.type&&(this.input.checked=e)}lock(){switch(this.type){case"text":this.input.readOnly=!0,this.input.style.color="grey";break;case"checkbox":this.input.disabled=!0;break;default:return}}setPattern(e){"text"==this.type&&null!==e&&(this.input.pattern=e)}}customElements.define("attr-field",AttrField);