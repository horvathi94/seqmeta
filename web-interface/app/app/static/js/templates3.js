const FIELDTYPES=["text","select","date","template"],REQUIREMENTS=["exclude","optional","recommended","mandatory"];function createCell({name:e="",content:t=[]}){const i=document.createElement("div");return i.classList.add("cell",e),t.forEach(e=>{i.appendChild(e)}),i}class AttrField{index=-1;status="new";params=null;constructor(e,t,i,s,n){this.index=e,this.status=t,this.name=i,this.fieldName=`attr+${this.status}+${this.index}+`+this.name,this.type=s,this.params=n,this.createInput(),this.field.addClasses(["field","attr",this.name]),console.log(this.field)}createInput(){switch(this.type){case"text":this.field=new TextField(this.fieldName),this.field.setPattern(this.params);break;case"select":this.field=new SelectField(this.fieldName,this.params)}}wrapCell(){return createCell({name:name=this.name,content:content=[this.field.input]})}}class TemplateAttr{index;status;row;constructor(e,t){this.index=e,this.status=t,this.generalNameField=new AttrField(this.index,this.status,"general_name","text","\\w+"),this.labelField=new AttrField(this.index,this.status,"label","text"),this.typeField=new AttrField(this.index,this.status,"type_","select",FIELDTYPES),this.enaNameField=new AttrField(this.index,this.status,"ena_name","text"),this.enaRequirementField=new AttrField(this.index,this.status,"ena_requirement","select",REQUIREMENTS),this.gisaidNameField=new AttrField(this.index,this.status,"gisaid_name","text"),this.gisaidRequirementField=new AttrField(this.index,this.status,"gisaid_requirement","select",REQUIREMENTS),this.parametersField=new AttrField(this.index,this.status,"parameters","text"),this.defaultField=new AttrField(this.index,this.status,"default","text"),this.setup()}static removeButton(){const e=document.createElement("input");return e.setAttribute("type","button"),e.classList.add("rmbutton"),e.value="X",e.onclick=function(){this.parentElement.parentElement.remove()},e}setup(){this.row=document.createElement("div"),this.row.classList.add("row",this.status);var e=createCell({name:name="rm",content:content=[this.constructor.removeButton()]});this.row.appendChild(e),this.row.appendChild(this.generalNameField.wrapCell()),this.row.appendChild(this.labelField.wrapCell()),this.row.appendChild(this.typeField.wrapCell()),e=createCell({name:name="ena",content:content=[this.enaNameField.field.input,this.enaRequirementField.field.input]}),this.row.appendChild(e),e=createCell({name:name="gisaid",content:content=[this.gisaidNameField.field.input,this.gisaidRequirementField.field.input]}),this.row.appendChild(e),this.row.appendChild(this.parametersField.wrapCell())}}const TEMPLATE_EDITOR=document.querySelector("#template-editor");function insertNewAttribute(e=null){var t;null===e&&(t=TEMPLATE_EDITOR.querySelectorAll("div.row.new").length,e=new TemplateAttr(t+1,"new")),console.log(e),TEMPLATE_EDITOR.appendChild(e.row)}