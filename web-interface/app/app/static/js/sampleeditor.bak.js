const SAMPLE_EDITOR=document.querySelector("#sample-editor").tBodies[0];let TEMPLATE;function createEditAllCell(e){const t=document.createElement("td");if(t.classList.add("editall"),"sample_name"==e.type_)return t.textContent="Must be unique.",t;if("file"==e.type_)return t.textContent="Upload files.",t;e=createAttributeField(e);return t.appendChild(e),t}function appendAttrRow(e){const t=SAMPLE_EDITOR.insertRow(),a=(t.dataset.generalName=e.general_name,document.createElement("th"));a.textContent=e.label,t.appendChild(a);var n=createEditAllCell(e);t.appendChild(n);const l=t.insertCell();return l.textContent=e.description,t}function createBlankSampleCell(){document.createElement("td")}function addBlankSample(){const e=document.querySelector("#samples-header-cell"),n=(e.style.display||(e.colSpan=parseInt(e.colSpan)+1),e.style.display="",parseInt(SAMPLE_EDITOR.rows[1].querySelectorAll("td.sample").length)+1);return TEMPLATE.attributes.forEach(e=>{const t=SAMPLE_EDITOR.querySelector(`tr[data-general-name='${e.general_name}']`),a=t.insertCell(t.cells.length-1);a.classList.add("sample"),a.dataset.sample=n,a.appendChild(createAttributeField(e))}),n}function addSample(e){addBlankSample();Array.from(SAMPLE_EDITOR.rows).forEach(e=>{console.log(e)})}function initTable(){TEMPLATE.attributes.forEach(e=>{appendAttrRow(e)});const e=document.querySelector("#sample-names").value.split(",");e&&e.forEach(e=>{fetch(`/samples/json?name=${e}&template_name=`+TEMPLATE.name).then(e=>e.json()).then(e=>addSample(e))})}const templateName=document.querySelector("#template-name").value;fetch("/templates/json?name="+templateName).then(e=>e.json()).then(e=>{TEMPLATE=e,initTable()});